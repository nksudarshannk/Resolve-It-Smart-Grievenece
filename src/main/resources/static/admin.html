<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard - ResolveIT</title>
    <meta http-equiv="refresh" content="0; url=enhanced-admin.html">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        .redirect-message {
            text-align: center;
            padding: 40px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        h1 { font-size: 2em; margin-bottom: 20px; }
        p { font-size: 1.1em; }
        .spinner {
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="redirect-message">
        <h1>üõ°Ô∏è Admin Dashboard</h1>
        <p>Please login first...</p>
        <div class="spinner"></div>
        <p style="font-size: 0.9em; margin-top: 20px;">
            Redirecting to <a href="admin-login.html" style="color: white; font-weight: bold;">admin login</a>
        </p>
    </div>
    <script>
        // Check if admin is logged in
        const adminSession = sessionStorage.getItem('adminSession');
        if (adminSession) {
            window.location.href = 'enhanced-admin.html';
        } else {
            window.location.href = 'admin-login.html';
        }
    </script>
</body>
</html>

    <!-- Statistics Cards -->
    <div class="stats-grid">
        <div class="stat-card stat-new">
            <h3 id="statNew">0</h3>
            <p>New Complaints</p>
        </div>
        <div class="stat-card stat-review">
            <h3 id="statReview">0</h3>
            <p>Under Review</p>
        </div>
        <div class="stat-card stat-resolved">
            <h3 id="statResolved">0</h3>
            <p>Resolved</p>
        </div>
        <div class="stat-card stat-total">
            <h3 id="statTotal">0</h3>
            <p>Total Complaints</p>
        </div>
    </div>

    <!-- Filter Tabs -->
    <div class="filter-tabs">
        <button class="tab-btn active" onclick="filterComplaints('ALL')">All</button>
        <button class="tab-btn" onclick="filterComplaints('NEW')">New</button>
        <button class="tab-btn" onclick="filterComplaints('UNDER_REVIEW')">Under Review</button>
        <button class="tab-btn" onclick="filterComplaints('RESOLVED')">Resolved</button>
    </div>

    <!-- Complaints Table -->
    <div class="complaints-table-container">
        <table class="complaints-table">
            <thead>
                <tr>
                    <th>Complaint ID</th>
                    <th>Subject</th>
                    <th>Category</th>
                    <th>Urgency</th>
                    <th>Status</th>
                    <th>Submitted</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="complaintsTableBody">
                <tr>
                    <td colspan="7" style="text-align: center; padding: 40px;">Loading complaints...</td>
                </tr>
            </tbody>
        </table>
    </div>

</div>

<!-- Modal for Complaint Details and Status Update -->
<div id="complaintModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        
        <h2>Complaint Details</h2>
        
        <div class="complaint-details">
            <div class="detail-row">
                <strong>Complaint ID:</strong>
                <span id="modalComplaintId"></span>
            </div>
            <div class="detail-row">
                <strong>Status:</strong>
                <span id="modalStatus" class="status-badge"></span>
            </div>
            <div class="detail-row">
                <strong>Submitted:</strong>
                <span id="modalSubmitted"></span>
            </div>
            <div class="detail-row">
                <strong>Last Updated:</strong>
                <span id="modalUpdated"></span>
            </div>
            <div class="detail-row">
                <strong>Name:</strong>
                <span id="modalName"></span>
            </div>
            <div class="detail-row">
                <strong>Email:</strong>
                <span id="modalEmail"></span>
            </div>
            <div class="detail-row">
                <strong>Category:</strong>
                <span id="modalCategory"></span>
            </div>
            <div class="detail-row">
                <strong>Urgency:</strong>
                <span id="modalUrgency"></span>
            </div>
            <div class="detail-row">
                <strong>Subject:</strong>
                <span id="modalSubject"></span>
            </div>
            <div class="detail-row full-width">
                <strong>Description:</strong>
                <p id="modalDescription"></p>
            </div>
        </div>

        <hr>

        <h3>Update Status</h3>
        <div class="status-update-form">
            <label>New Status</label>
            <select id="newStatus" class="form-control">
                <option value="NEW">New</option>
                <option value="UNDER_REVIEW">Under Review</option>
                <option value="RESOLVED">Resolved</option>
            </select>

            <label>Admin Comment</label>
            <textarea id="adminComment" class="form-control" rows="3" placeholder="Add comment about this status change..."></textarea>

            <button onclick="updateStatus()" class="btn-primary">Update Status</button>
        </div>

        <hr>

        <h3>Timeline of Updates</h3>
        <div id="timeline" class="timeline">
            <p style="text-align: center; color: #888;">Loading timeline...</p>
        </div>

    </div>
</div>

<script src="admin.js"></script>
</body>
</html>
